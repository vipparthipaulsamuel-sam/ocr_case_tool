
{% extends 'base.html' %}
{% block content %}
<div class="container">
  <h2 class="mt-3 mb-3">Edit Payment #{{ p.id }}</h2>
  <form method="post">
    <div class="row g-3">
      <div class="col-md-4"><label class="form-label">Bank Name</label><input class="form-control" name="bank_name" value="{{ p.bank_name or '' }}"></div>
      <div class="col-md-4"><label class="form-label">UTR</label><input class="form-control" name="utr" value="{{ p.utr or '' }}"></div>
      <div class="col-md-4"><label class="form-label">UPI Txn / Reference</label><input class="form-control" name="upi_txn_id" value="{{ p.upi_txn_id or '' }}"></div>

      <div class="col-md-3"><label class="form-label">Amount (INR)</label><input class="form-control" name="amount_inr" value="{{ '%.2f'|format(p.amount_inr) if p.amount_inr else '' }}"></div>
      <div class="col-md-3"><label class="form-label">Currency</label><input class="form-control" name="currency" value="{{ p.currency or 'INR' }}"></div>
      <div class="col-md-3"><label class="form-label">Date</label><input class="form-control" name="date" placeholder="YYYY-MM-DD" value="{{ p.txn_time.strftime('%Y-%m-%d') if p.txn_time else '' }}"></div>
      <div class="col-md-3"><label class="form-label">Time</label><input class="form-control" name="time" placeholder="HH:MM (24h)" value="{{ p.txn_time.strftime('%H:%M') if p.txn_time else '' }}"></div>

      <div class="col-md-4"><label class="form-label">Payer Name (UPI From)</label><input class="form-control" name="payer_name" value="{{ p.payer_name or '' }}"></div>
      <div class="col-md-4"><label class="form-label">Payee VPA (UPI To)</label><input class="form-control" name="payee_vpa" value="{{ p.payee_vpa or '' }}"></div>
      <div class="col-md-4"><label class="form-label">Payee Name (Credited Bank Name)</label><input class="form-control" name="payee_name" value="{{ p.payee_name or '' }}"></div>

      <div class="col-md-4"><label class="form-label">Channel</label><input class="form-control" name="channel" value="{{ p.channel or '' }}"></div>
      <div class="col-md-4"><label class="form-label">Status</label><input class="form-control" name="txn_status" value="{{ p.txn_status or '' }}"></div>
      <div class="col-md-12"><label class="form-label">Remarks</label><input class="form-control" name="remarks" value="{{ p.remarks or '' }}"></div>
      <div class="col-md-12"><label class="form-label">Notes</label><textarea class="form-control" rows="3" name="notes">{{ p.notes or '' }}</textarea></div>
    </div>
    <div class="mt-3">
      <button class="btn btn-primary">Save</button>
      <a class="btn btn-link" href="{{ url_for('case_detail', case_id=p.case_id) if p.case_id else url_for('payments.list_payments') }}">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}
